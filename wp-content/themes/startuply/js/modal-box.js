!function(o){function a(o,a,t){var e,d=new Date;0==t?e=0:(d.setTime(d.getTime()+24*t*60*60*1e3),e="expires="+d.toGMTString()),document.cookie=o+"="+a+"; "+e+"; path=/"}function t(o){for(var a=o+"=",t=document.cookie.split(";"),e=0;e<t.length;e++){for(var d=t[e];" "==d.charAt(0);)d=d.substring(1);if(-1!=d.indexOf(a))return d.substring(a.length,d.length)}return""}var e,d,i,n;e=function(a){this.el=o(a)},e.prototype.center=function(){var o,a=this.el,t=a.find(".modal-box"),e=a.height(),d=t.outerHeight();t.is(".top")||t.is(".bottom")||(o=(e-d)/2,t.css("top",o)),t.is(".bottom")&&(o=e-d,t.css("top",o))},e.prototype.show=function(){var e=this.el,d=e.data("modal"),i=e.find(".modal-box").data("animation"),n=e.find(".modal-box").data("cookie-trigger"),l=e.find(".modal-box").data("cookie-key"),r=e.find(".modal-box").data("cookie"),c=e.find("iframe"),m=t(d);m!=l&&("open"==n&&a(d,l,r),o("[data-modal].open").length&&o("[data-modal].open").modalBox("hide"),c.length&&c.attr("src",c.data("iframeSrc")),e.addClass("open"),"none"==i?e.show():e.fadeIn(250),this.center())},e.prototype.hide=function(){var o=this.el,t=o.data("modal"),e=o.find(".modal-box").data("animation"),d=o.find(".modal-box").data("cookie-trigger"),i=o.find(".modal-box").data("cookie-key"),n=o.find(".modal-box").data("cookie"),l=o.find("iframe");"close"==d&&a(t,i,n),o.removeClass("open"),e&&"none"==e?(o.hide(),l.length&&l.attr("src","")):(o.fadeOut(250),setTimeout(function(){l.length&&l.attr("src","")},250))},o.fn.modalBox=function(a){return this.each(function(){var t=o(this),d=t.data("modalBox");d||(d=new e(this),t.data("modalBox",d)),"string"==typeof a&&d[a]()})},d=function(a){a.preventDefault();var t=o(this).data("modalLink"),e=o("[data-modal="+t+"]");e.modalBox("show")},clickHandler=function(o){},i=function(){o(this).closest("[data-modal]").modalBox("hide")},resizeHandler=function(){o("[data-modal].open").length&&o("[data-modal].open").modalBox("center")},n=function(a){var t=o(a.target).closest(".modal-window");if(scroll_lock=t.data("scroll-lock"),1==scroll_lock){a.preventDefault();var e=a.originalEvent,d=e.wheelDelta||-e.detail,i=o(a.target).closest(".modal-box");i.length&&(i.get(0).scrollTop-=d)}},o("a").each(function(){o(this);$iframe=o(this).data("iframe"),$iframe&&($modalId=o(this).data("modalLink"),$href=o(this).attr("href"),$iframe='<iframe src="'+$href+'" frameborder="0" allowfullscreen></iframe>',$modalBox='<div class="modal-window" data-modal="'+$modalId+'"><div class="modal-box"><span class="close-btn icon icon-office-52"></span>'+$iframe+"</div></div>",o("body").append($modalBox))}),o(".modal-window").each(function(){var a=o(this),t=a.find(".modal-box"),e=o(this).data("modal"),d=a.data("timeout"),i=a.data("scroll");if(a.find("iframe").length){var n=a.find("iframe"),l=n.attr("src");t.addClass("iframe-box"),n.attr("src",""),n.data("iframeSrc",l)}d&&setTimeout(function(){a.modalBox("show")},d),i&&o(window).on("scroll.modalBox"+e,function(){o(this).scrollTop()>=i&&(a.modalBox("show"),o(window).off(".modalBox"+e))})}),o(document).on("click.modalBox","[data-modal-link]",d).on("click.modalBox","[data-modal]",clickHandler).on("click.modalBox","[data-modal] .close-btn",i).on("mousewheel.modalBox DOMMouseScroll.modalBox","[data-modal]",n),o(window).on("resize.modalBox",resizeHandler)}(jQuery);